# SongoAI Manager Bot

**SongoAI Manager Bot** — это скрипт для автоматизации работы с платформой [Sogni.ai](https://app.sogni.ai/). Проект позволяет:

- **Ежедневный клейм (Daily Claim):**  
  Автоматически проверяет и получает бонусы для нескольких аккаунтов (мультиаккаунт). Токены для ежедневного клейма хранятся в файле `token.txt`.

- **Генерация изображений (Мультиаккаунт):**  
  Генерирует изображения с использованием нескольких аккаунтов. Данные для генерации (логин, пароль, UUID) берутся из файла `data.txt`. Если указаны прокси (файл `proxy.txt`), для каждого аккаунта используется соответствующий прокси. Дополнительно можно задать кастомные промты через `prompts.txt`.

- **Интерактивное управление и конфигурация:**  
  Простое текстовое меню позволяет выбирать действия, добавлять новые данные (аккаунты, промты, токены, прокси) и обновлять параметры задержек (минимальная, максимальная задержка между итерациями и максимальная начальная задержка для аккаунта) через интерактивный ввод. Значения задержек сохраняются в файле `src/config.json`.

---

## Требования

- **Node.js** v14 или выше (рекомендуется Node.js v22+)
- **NPM**

---

## Установка

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/k2wGG/sogniai-manager-bot.git
   cd sogniai-manager-bot
   ```

2. **Установите зависимости:**

   ```bash
   npm install
   ```

3. **Убедитесь, что** в файле `package.json` указан `"type": "module"` для использования ES‑модулей.

---

## Использование

### Интерактивное меню

При запуске проекта отображается текстовое меню, где можно выбрать нужное действие, введя соответствующую цифру. Запустите проект командой:

```bash
npm start
```

На экране появится баннер и список пунктов:

1. **Ежедневный клейм (Daily Claim)**  
   Проверяет бонус для каждого токена из `token.txt` и, если бонус доступен, выполняет его получение.

2. **Генерация изображений (Мультиаккаунт)**  
   Запускает генерацию изображений для аккаунтов из `data.txt`. Для каждого аккаунта создаётся клиент и выполняется авторизация один раз. Затем в бесконечном цикле генерируются изображения с механизмом повторных попыток и случайными задержками между итерациями (настраиваются через `src/config.json`). Если для аккаунта указан прокси (из файла `proxy.txt`), он используется.

3. **Добавить данные (login|password|uuid)**  
   Добавляет новую запись в файл `data.txt`.

4. **Добавить новые промты**  
   Добавляет новый промт в файл `prompts.txt`.

5. **Добавить токены (ежедневный клейм)**  
   Добавляет новые токены в файл `token.txt`.

6. **Добавить прокси**  
   Добавляет новые прокси в файл `proxy.txt`.

7. **Обновить конфигурацию задержек**  
   Позволяет через интерактивное меню задать новые значения для задержек:
   - `minDelay` — минимальная задержка между итерациями (в мс)
   - `maxDelay` — максимальная задержка между итерациями (в мс)
   - `initialDelayMax` — максимальная начальная задержка для аккаунта (в мс)

0. **Выход**  
   Завершает работу программы.

После выполнения каждого одноразового действия меню возвращается, позволяя выбрать новое действие.

---

### Ежедневный клейм

- Скрипт считывает токены из `token.txt` (по одному на строке).
- Для каждого токена проверяется, доступен ли бонус, и если да, происходит его получение.
- Авторизация выполняется один раз для каждого аккаунта, что снижает нагрузку на API.

---

### Генерация изображений

- Данные для генерации (login, пароль, UUID) берутся из `data.txt`.
- Для каждого аккаунта создаётся один экземпляр клиента, авторизация происходит один раз, а затем используется для всех итераций генерации.
- Реализован механизм повторных попыток при ошибке «Timeout waiting for models» (до 3 попыток с задержкой 10 секунд).
- Между итерациями используется случайная задержка, заданная в диапазоне от `minDelay` до `maxDelay` (значения берутся из `src/config.json`).
- Начальная задержка для каждого аккаунта задаётся случайно от 0 до `initialDelayMax` (также из `src/config.json`).
- Если для аккаунта указан прокси (файл `proxy.txt`), он применяется.

---

### Обновление конфигурации задержек

Через меню можно обновить параметры задержек, которые используются при генерации изображений. Эти параметры:

- **minDelay** – минимальная задержка между итерациями (в миллисекундах)
- **maxDelay** – максимальная задержка между итерациями (в миллисекундах)
- **initialDelayMax** – максимальная начальная задержка для каждого аккаунта (в миллисекундах)

Новые значения сохраняются в файле `src/config.json` и используются в процессе генерации.

---

### Добавление данных

Через меню доступны функции для добавления:

- **Данных (login|password|uuid):**  
  Добавляет новую строку в `data.txt`.

- **Новых промтов:**  
  Добавляет новый промт в `prompts.txt`.

- **Токенов:**  
  Добавляет новые токены в `token.txt`.

- **Прокси:**  
  Добавляет новые прокси в `proxy.txt`.

Обратите внимание, что файлы должны сохраняться с корректными переводами строк (например, для Windows — `\r\n`).

---

## Особенности

- **Мультиаккаунт:**  
  Поддержка нескольких аккаунтов для ежедневного клейма и генерации изображений с сохранением сессии (однократная авторизация).

- **Поддержка прокси:**  
  Если указаны прокси в `proxy.txt`, для каждого аккаунта используется соответствующий прокси.

- **Интерактивное управление:**  
  Простое текстовое меню позволяет выбирать действия, добавлять новые данные и обновлять параметры задержек.

- **Гибкая настройка задержек:**  
  Значения задержек можно задавать через конфигурационный файл, который обновляется через меню. Это позволяет распределять запросы случайным образом, снижая нагрузку на API.

- **Retry-механизм:**  
  При ошибке «Timeout waiting for models» выполняется до 3 повторных попыток с задержкой 10 секунд между ними.

---

## Лицензия

Этот проект распространяется под лицензией MIT. Ознакомьтесь с файлом [LICENSE](LICENSE) для подробностей.
